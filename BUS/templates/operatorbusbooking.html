{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyWay - Online Bus Ticket Booking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: hsl(216, 100%, 79%);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #2f7bf5 0%, #8ab5ff 100%);
        }
        
        .gradient-bg-dark {
            background: linear-gradient(135deg, #1a68e6 0%, #6a9ef8 100%);
        }
        
       .seat-btn {
    width: 50px;
    height: 50px;
    background-color: #e0e7ff; /* light indigo */
    border: 2px solid #6366f1; /* indigo */
    border-radius: 8px;
    font-weight: 600;
    color: #3730a3;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }
  .seat-btn:hover {
    background-color: #6366f1;
    color: white;
  }
  .seat-btn.selected {
    background-color: #03ff85; /* blue-600 */
    color: white;
    border-color: #1d4ed8;
  }
  .seat-btn.select{
    background-color: #3b82f6;
    color: white;
    border-color: #1d4ed8;
  }
  .seat-btn.booked {
     background-color: #ddff6f;
    color: rgb(0, 0, 0);
    border-color: #1d4ed8;
  }

  /*.seat-btn.booked {
    background-color: #f87171; /* red-400 
    color: white;
    cursor: not-allowed;
    border-color: #b91c1c;
  }*/

  /* Add spacing for aisle after 2nd column */
  .grid-cols-4 > button:nth-child(2n) {
    margin-right: 16px; /* aisle space */
  }

        /* Floating animation */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 4s ease-in-out infinite;
        }
        
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* Bus moving animation */
        .bus-move {
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        
        /* Road animation */
        @keyframes road-move {
            from { background-position: 0 0; }
            to { background-position: 100px 0; }
        }
        
       

        /* Custom scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        
        /* Glowing border */
        @keyframes border-glow {
            0% { box-shadow: 0 0 5px rgba(41, 117, 239, 0.5); }
            50% { box-shadow: 0 0 20px rgba(41, 117, 239, 0.8); }
            100% { box-shadow: 0 0 5px rgba(41, 117, 239, 0.5); }
        }
        
        .glow-border {
            animation: border-glow 3s infinite;
        }
        
        /* ticketprint */
        @media print {
        body * {
            visibility: hidden;
        }
        #printArea, #printArea * {
            visibility: visible;
        }
        #printArea {
            position: absolute;
            left: 0;
            top: 0;
        }

        }

    </style>
</head>
<body>
    <!-- Header/Navigation -->
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3 animate__animated animate__fadeInLeft">
                    <i class="fas fa-bus text-3xl"></i>
                    <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-blue-100">
                        SkyWay
                    </h1>
                </div>
                
                <nav class="hidden md:flex space-x-8">
                    <a href="{% url 'home' %}" class="hover:text-blue-200 font-medium transition duration-300 transform hover:scale-110 relative group">
                        Home
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'busoperator' %}" class="hover:text-blue-200 font-medium transition duration-300 transform hover:scale-110 relative group">
                        Counter
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="{% url 'routeview' %}" class="hover:text-blue-200 font-medium transition duration-300 transform hover:scale-110 relative group">
                        Routes
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    
                    <a href="{% url 'carnumberlistview' %}" class="hover:text-blue-200 font-medium transition duration-300 transform hover:scale-110 relative group">
                        Bus
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
                    </a>

                    <a href="{% url 'DateByDateReport' %}" class="hover:text-blue-200 font-medium transition duration-300 transform hover:scale-110 relative group">
                        Report Dashboard
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    {% endif %}
                    <a href="{% url 'aboutview' %}" class="hover:text-blue-200 font-medium transition duration-300 transform hover:scale-110 relative group">
                       About
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
                    </a>

                </nav>
                
                {% if user.is_authenticated %}
                        <a href="{% url 'logoutview' %}" class="bg-white text-blue-600 px-6 py-2 rounded-full font-bold hover:bg-blue-50 transition transform hover:scale-105 shadow-lg glow-border">Sign Out</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="bg-white text-blue-600 px-6 py-2 rounded-full font-bold hover:bg-blue-50 transition transform hover:scale-105 shadow-lg glow-border">Sign In</a>
                    {% endif %}
                    <button class="md:hidden text-2xl">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-16 relative overflow-hidden">
        <!-- Animated background elements -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden">
            <div class="absolute top-20 left-10 w-20 h-20 rounded-full bg-white opacity-5 animate__animated animate__pulse animate__infinite"></div>
        </div>
        
        <div class="container mx-auto px-4 relative z-10">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-12 md:mb-0 animate__animated animate__fadeInLeft">
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
                        Journey <span class="text-yellow-300">Simplified</span> with SkyWay
                    </h2>
                        <p class="text-xl mb-8 opacity-90 max-w-lg text-justify">
                           Welcome to SkyWay! In today‚Äôs fast-paced world, every second counts. SkyWay offers a quick, convenient, and reliable way to book your bus tickets anytime, anywhere ‚Äî from choosing your route and seat to confirming your trip in just a few clicks.
                        </p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6">
                        <button class="bg-white text-blue-600 px-8 py-4 rounded-full font-bold hover:bg-blue-50 transition transform hover:scale-105 shadow-xl pulse flex items-center justify-center">
                            <i class="fas fa-ticket-alt mr-3 text-xl"></i> Book Your Seat Now
                        </button>
                    </div>
                    
                    <div class="mt-12 flex flex-wrap gap-6">
                        <div class="flex items-center bg-white bg-opacity-20 px-4 py-2 rounded-full">
                            <i class="fas fa-wifi mr-2 text-yellow-300"></i>
                            <span>Free WiFi</span>
                        </div>
                        <div class="flex items-center bg-white bg-opacity-20 px-4 py-2 rounded-full">
                            <i class="fas fa-plug mr-2 text-yellow-300"></i>
                            <span>Charging Ports</span>
                        </div>
                    </div>
                </div>
                <div class="md:w-1/2 animate__animated animate__fadeInRight">
                    <div class="relative floating">
                        <img src="{% static 'images/travels.jpg' %}" 
                             alt="Luxury Bus" 
                             class="rounded-2xl shadow-2xl w-full h-auto max-h-[500px] object-cover border-4 border-white transform rotate-1">
                        <div class="absolute -bottom-5 -right-5 bg-yellow-400 text-gray-900 px-6 py-3 rounded-xl shadow-2xl font-bold text-lg flex items-center">
                            <i class="fas fa-bolt mr-2"></i> Welcome!
                        </div>
                    </div>
                </div>
            </div>
        </div>  
    </section>

    

    <!-- Search Section -->
   <section class="container mx-auto px-4 py-12 -mt-16 relative z-20">
    <form id="searchroute">
        <div class="bg-white rounded-2xl shadow-2xl p-8 animate__animated animate__fadeInUp">
            <h3 class="text-2xl font-bold mb-6 text-gray-800 flex items-center">
                <i class="fas fa-search-location mr-3 text-blue-500 text-3xl"></i> 
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-blue-700">
                    Where Would You Like to Go?
                </span>
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">From</label>
                    <select id="fromname" name="from" class="w-full p-4 border-2 border-gray-200 rounded-xl">
                        <option>Select City</option>
                            <option>Yangon(·Äõ·Äî·Ä∫·ÄÄ·ÄØ·Äî·Ä∫)</option>
                            <option>Ahtet Min Hla(·Ä°·Äë·ÄÄ·Ä∫·Äô·ÄÑ·Ä∫·Ä∏·Äú·Äæ)</option>
                            <option>AungLan(·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äú·Ä∂)</option>
                            <option>Aungpan(·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äï·Äî·Ä∫·Ä∏)</option>
                            <option>Ayadaw(·Ä°·Äõ·Ä¨·Äê·Ä±·Ä¨·Ä∫)</option>
                            <option>Ayetharyar(·Ä°·Ä±·Ä∏·Äû·Ä¨·Äö·Ä¨)</option>
                            <option>Bagan(·Äï·ÄØ·ÄÇ·Ä∂) Nyaung U(·Ää·Ä±·Ä¨·ÄÑ·Ä∫·Ä¶·Ä∏)</option>
                            <option>Bago(·Äï·Ä≤·ÄÅ·Ä∞·Ä∏)</option>
                            <option>Bahin(·Äó·Äü·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Banmauk(·Äó·Äî·Ä∫·Ä∏·Äô·Ä±·Ä¨·ÄÄ·Ä∫)</option>
                            <option>Banmaw(·Äó·Äî·Ä∫·Ä∏·Äô·Ä±·Ä¨·Ä∫)</option>
                            <option>Bilin(·Äò·ÄÆ·Ä∏·Äú·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Bogale(·Äò·Ä≠·ÄØ·ÄÄ·Äú·Ä±·Ä∏)</option>
                            <option>Budalin(·Äò·ÄØ·Äê·Äú·ÄÑ·Ä∫)</option>
                            <option>Chauk(·ÄÅ·Äª·Ä±·Ä¨·ÄÄ·Ä∫)</option>
                            <option>Chaung Thar(·ÄÅ·Äª·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äû·Ä¨)</option>
                            <option>ChaungU(·ÄÅ·Äª·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ä¶·Ä∏)</option>
                            <option>DaikU(·Äí·Ä≠·ÄØ·ÄÄ·Ä∫·Ä¶·Ä∏)</option>
                            <option>Danai(·Äê·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Danubyu(·Äì·Äî·ÄØ·Äñ·Äº·Ä∞)</option>
                            <option>Dawei(·Äë·Ä¨·Ä∏·Äù·Äö·Ä∫)</option>
                            <option>Gangaw(·ÄÇ·Äî·Ä∫·Ä∑·ÄÇ·Ä±·Ä´)</option>
                            <option>Gwa(·ÄÇ·ÄΩ)</option>
                            <option>Hakha(·Äü·Ä¨·Ä∏·ÄÅ·Ä´·Ä∏)</option>
                            <option>Ham Myint Mo(·Äü·Ä∂·Äô·Äº·ÄÑ·Ä∫·Ä∑·Äô·Ä≠·ÄØ·Äõ·Ä∫)</option>
                            <option>HeHoe(·Äü·Ä≤·Äü·Ä≠·ÄØ·Ä∏)</option>
                            <option>Hinthada(·Äü·ÄÑ·Ä∫·Äπ·Äû·Ä¨·Äê)</option>
                            <option>Hlegu(·Äú·Äæ·Ää·Ä∫·Ä∏·ÄÄ·Ä∞·Ä∏)</option>
                            <option>Hopin(·Äü·Ä≠·ÄØ·Äï·ÄÑ·Ä∫)</option>
                            <option>Hopong(·Äü·Ä≠·ÄØ·Äï·ÄØ·Ä∂·Ä∏)</option>
                            <option>Hpa An(·Äò·Ä¨·Ä∏·Ä°·Ä∂)</option>
                            <option>Hpakan(·Äñ·Ä¨·Ä∏·ÄÄ·Äî·Ä∫·Ä∑)</option>
                            <option>Hpayargyi(·Äò·ÄØ·Äõ·Ä¨·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Hsipaw(·Äû·ÄÆ·Äï·Ä±·Ä´)</option>
                            <option>Htonebo(·Äë·ÄØ·Ä∂·Ä∏·Äò·Ä≠·ÄØ)</option>
                            <option>Indaw(·Ä°·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·Ä∫)</option>
                            <option>Ingapu(·Ä°·ÄÑ·Ä∫·Äπ·ÄÇ·Äï·Ä∞)</option>
                            <option>Kalaw(·ÄÄ·Äú·Ä±·Ä¨)</option>
                            <option>Kale(·ÄÄ·Äú·Ä±·Ä∏)</option>
                            <option>Kanbalu(·ÄÄ·Äî·Ä∫·Ä∑·Äò·Äú·Ä∞)</option>
                            <option>Karli(·ÄÄ·Ä¨·Äú·ÄÆ)</option>
                            <option>Katha(·ÄÄ·Äû·Ä¨)</option>
                            <option>Kawkareik(·ÄÄ·Ä±·Ä¨·Ä∑·ÄÄ·Äõ·Ä≠·Äê·Ä∫)</option>
                            <option>Kawyhaung(·ÄÄ·Ä±·Ä¨·Ä∑·Äû·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Khin U (·ÄÅ·ÄÑ·Ä∫·Ä¶·Ä∏)</option>
                            <option>Koebin(·ÄÄ·Ä≠·ÄØ·Ä∏·Äï·ÄÑ·Ä∫)</option>
                            <option>Kume(·ÄÄ·Ä∞·Äô·Ä≤)</option>
                            <option>Kutkai(·ÄÄ·ÄΩ·Äê·Ä∫·ÄÅ·Ä≠·ÄØ·ÄÑ·Ä∫)</option>
                            <option>Kyaikkami(·ÄÄ·Äª·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÅ·Äô·ÄÆ)</option>
                            <option>Kyainseikgyi(·ÄÄ·Äº·Ä¨·Ä°·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·Äï·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Kyangin(·ÄÄ·Äº·Ä∂·ÄÅ·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Kyaukme(·ÄÄ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Ä≤)</option>
                            <option>Kyaukpadaung(·ÄÄ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Kyaiktiyo(·ÄÄ·Äª·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·ÄÆ·Ä∏·Äõ·Ä≠·ÄØ·Ä∏)</option>
                            <option>Kyaukse(·ÄÄ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·ÄÜ·Ää·Ä∫)</option>
                            <option>Lashio(·Äú·Ä¨·Ä∏·Äõ·Äæ·Ä≠·Ä∏)</option>
                            <option>Laukkaing(·Äú·Ä±·Ä¨·ÄÄ·Ä∫·ÄÄ·Ä≠·ÄØ·ÄÑ·Ä∫)</option>
                            <option>Letpadan(·Äú·ÄÄ·Ä∫·Äï·Ä∂·Äê·Äî·Ä∫·Ä∏)</option>
                            <option>Letpanhla(·Äú·ÄÄ·Ä∫·Äï·Ä∂·Äú·Äæ)</option>
                            <option>Lewe(·Äú·Äö·Ä∫·Äù·Ä±·Ä∏)</option>
                            <option>Mabein(·Äô·Äò·Ä≠·Äô·Ä∫·Ä∏)</option>
                            <option>Madaya(·Äô·Äê·Äπ·Äê·Äõ·Ä¨)</option>
                            <option>Magway(·Äô·ÄÄ·ÄΩ·Ä±·Ä∏)</option>
                            <option>Mahlaing(·Äô·Äú·Äæ·Ä≠·ÄÑ·Ä∫)</option>
                            <option>Mandalay(·Äô·Äî·Äπ·Äê·Äú·Ä±·Ä∏)</option>
                            <option>Meiktila(·Äô·Ä≠·Äê·Äπ·Äë·ÄÆ·Äú·Ä¨)</option>
                            <option>Minbu(·Äô·ÄÑ·Ä∫·Ä∏·Äò·Ä∞·Ä∏)</option>
                            <option>Mogaung(·Äô·Ä≠·ÄØ·Ä∏·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Mogok(·Äô·Ä≠·ÄØ·Ä∏·ÄÄ·ÄØ·Äê·Ä∫)</option>
                            <option>Mohnyin(·Äô·Ä≠·ÄØ·Ä∏·Ää·Äæ·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Muse(·Äô·Ä∞·ÄÜ·Äö·Ä∫)</option>
                            <option>Mya Taung(·Äô·Äº·Äê·Ä±·Ä¨·ÄÑ·Ä∫)</option>
                            <option>Maung Mya(·Äô·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äô·Äº)</option>
                            <option>Myawaddy(·Äô·Äº·Äù·Äê·ÄÆ)</option>
                            <option>Myeik(·Äô·Äº·Ä≠·Äê·Ä∫)</option>
                            <option>Myingyan(·Äô·Äº·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·Ä∂)</option>
                            <option>Myinmu(·Äô·Äº·ÄÑ·Ä∫·Ä∏·Äô·Ä∞)</option>
                            <option>Myitkyina(·Äô·Äº·ÄÖ·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏·Äî·Ä¨·Ä∏)</option>
                            <option>Myitnge(·Äô·Äº·ÄÖ·Ä∫·ÄÑ·Äö·Ä≠)</option>
                            <option>Namhkan(·Äî·Äô·Ä∫·Ä∑·ÄÅ·Äô·Ä∫·Ä∏)</option>
                            <option>Namhkok(·Äî·Äô·Ä∫·Ä∑·ÄÅ·ÄØ·Äê·Ä∫)</option>
                            <option>Nanmati(·Äî·Äô·Äπ·Äô·Äê·ÄÆ·Ä∏)</option>
                            <option>Natmauk(·Äî·Äê·Ä∫·Äô·Ä±·Ä¨·ÄÄ·Ä∫)</option>
                            <option>Natogyi(·Äî·ÄΩ·Ä¨·Ä∏·Äë·Ä≠·ÄØ·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Nay Pyi Taw(·Äî·Ä±·Äï·Äº·Ää·Ä∫·Äê·Ä±·Ä¨·Ä∫)</option>
                            <option>Ngapali(·ÄÑ·Äï·Äú·ÄÆ)</option>
                            <option>Ngar O(·ÄÑ·Ä´·Ä∏·Ä°·Ä≠·ÄØ·Ä∏)</option>
                            <option>Ngwe Saung(·ÄÑ·ÄΩ·Ä±·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫)</option>
                            <option>Pyin Oo Lwin(·Äï·Äº·ÄÑ·Ä∫·Ä¶·Ä∏·Äú·ÄΩ·ÄÑ·Ä∫)</option>
                            <option>Pyawbwe(·Äï·Äª·Ä±·Ä¨·Ä∫·Äò·ÄΩ·Äö·Ä∫)</option>
                            <option>Phyu(·Äñ·Äº·Ä∞·Ä∏)</option>
                            <option>Popa(·Äï·ÄØ·Äï·Äπ·Äï·Ä´·Ä∏)</option>
                            <option>Pyay(·Äï·Äº·Ää·Ä∫)</option>
                            <option>Shwe ku(·Äõ·ÄΩ·Äæ·Ä±·ÄÄ·Ä∞)</option>
                            <option>Shwe Bo(·Äõ·ÄΩ·Äæ·Ä±·Äò·Ä≠·ÄØ)</option>
                            <option>Shwe Nyaung(·Äõ·ÄΩ·Äæ·Ä±·Ää·Ä±·Ä¨·ÄÑ·Ä∫)</option>
                            <option>Sintgaing(·ÄÖ·Äâ·Ä∫·Ä∑·ÄÄ·Ä≠·ÄØ·ÄÑ·Ä∫)</option>
                            <option>Taunggyi(·Äê·Ä±·Ä¨·ÄÑ·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Tachileik(·Äê·Ä¨·ÄÅ·Äª·ÄÆ·Äú·Ä≠·Äê·Ä∫)</option>
                            <option>Ye(·Äõ·Ä±·Ä∏)</option>
                            <option>Ye U(·Äõ·Ä±·Ä¶·Ä∏)</option>
                            <option>Yamethin(·Äõ·Äô·Ää·Ä∫·Ä∏·Äû·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Wundwin(·Äù·Äô·Ä∫·Ä∏·Äê·ÄΩ·ÄÑ·Ä∫·Ä∏)</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">To</label>
                    <select id="toname" name="to" class="w-full p-4 border-2 border-gray-200 rounded-xl">
                        <option>Select City</option>
                            <option>Yangon(·Äõ·Äî·Ä∫·ÄÄ·ÄØ·Äî·Ä∫)</option>
                            <option>Ahtet Min Hla(·Ä°·Äë·ÄÄ·Ä∫·Äô·ÄÑ·Ä∫·Ä∏·Äú·Äæ)</option>
                            <option>AungLan(·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äú·Ä∂)</option>
                            <option>Aungpan(·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äï·Äî·Ä∫·Ä∏)</option>
                            <option>Ayadaw(·Ä°·Äõ·Ä¨·Äê·Ä±·Ä¨·Ä∫)</option>
                            <option>Ayetharyar(·Ä°·Ä±·Ä∏·Äû·Ä¨·Äö·Ä¨)</option>
                            <option>Bagan(·Äï·ÄØ·ÄÇ·Ä∂) Nyaung U(·Ää·Ä±·Ä¨·ÄÑ·Ä∫·Ä¶·Ä∏)</option>
                            <option>Bago(·Äï·Ä≤·ÄÅ·Ä∞·Ä∏)</option>
                            <option>Bahin(·Äó·Äü·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Banmauk(·Äó·Äî·Ä∫·Ä∏·Äô·Ä±·Ä¨·ÄÄ·Ä∫)</option>
                            <option>Banmaw(·Äó·Äî·Ä∫·Ä∏·Äô·Ä±·Ä¨·Ä∫)</option>
                            <option>Bilin(·Äò·ÄÆ·Ä∏·Äú·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Bogale(·Äò·Ä≠·ÄØ·ÄÄ·Äú·Ä±·Ä∏)</option>
                            <option>Budalin(·Äò·ÄØ·Äê·Äú·ÄÑ·Ä∫)</option>
                            <option>Chauk(·ÄÅ·Äª·Ä±·Ä¨·ÄÄ·Ä∫)</option>
                            <option>Chaung Thar(·ÄÅ·Äª·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äû·Ä¨)</option>
                            <option>ChaungU(·ÄÅ·Äª·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ä¶·Ä∏)</option>
                            <option>DaikU(·Äí·Ä≠·ÄØ·ÄÄ·Ä∫·Ä¶·Ä∏)</option>
                            <option>Danai(·Äê·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Danubyu(·Äì·Äî·ÄØ·Äñ·Äº·Ä∞)</option>
                            <option>Dawei(·Äë·Ä¨·Ä∏·Äù·Äö·Ä∫)</option>
                            <option>Gangaw(·ÄÇ·Äî·Ä∫·Ä∑·ÄÇ·Ä±·Ä´)</option>
                            <option>Gwa(·ÄÇ·ÄΩ)</option>
                            <option>Hakha(·Äü·Ä¨·Ä∏·ÄÅ·Ä´·Ä∏)</option>
                            <option>Ham Myint Mo(·Äü·Ä∂·Äô·Äº·ÄÑ·Ä∫·Ä∑·Äô·Ä≠·ÄØ·Äõ·Ä∫)</option>
                            <option>HeHoe(·Äü·Ä≤·Äü·Ä≠·ÄØ·Ä∏)</option>
                            <option>Hinthada(·Äü·ÄÑ·Ä∫·Äπ·Äû·Ä¨·Äê)</option>
                            <option>Hlegu(·Äú·Äæ·Ää·Ä∫·Ä∏·ÄÄ·Ä∞·Ä∏)</option>
                            <option>Hopin(·Äü·Ä≠·ÄØ·Äï·ÄÑ·Ä∫)</option>
                            <option>Hopong(·Äü·Ä≠·ÄØ·Äï·ÄØ·Ä∂·Ä∏)</option>
                            <option>Hpa An(·Äò·Ä¨·Ä∏·Ä°·Ä∂)</option>
                            <option>Hpakan(·Äñ·Ä¨·Ä∏·ÄÄ·Äî·Ä∫·Ä∑)</option>
                            <option>Hpayargyi(·Äò·ÄØ·Äõ·Ä¨·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Hsipaw(·Äû·ÄÆ·Äï·Ä±·Ä´)</option>
                            <option>Htonebo(·Äë·ÄØ·Ä∂·Ä∏·Äò·Ä≠·ÄØ)</option>
                            <option>Indaw(·Ä°·ÄÑ·Ä∫·Ä∏·Äê·Ä±·Ä¨·Ä∫)</option>
                            <option>Ingapu(·Ä°·ÄÑ·Ä∫·Äπ·ÄÇ·Äï·Ä∞)</option>
                            <option>Kalaw(·ÄÄ·Äú·Ä±·Ä¨)</option>
                            <option>Kale(·ÄÄ·Äú·Ä±·Ä∏)</option>
                            <option>Kanbalu(·ÄÄ·Äî·Ä∫·Ä∑·Äò·Äú·Ä∞)</option>
                            <option>Karli(·ÄÄ·Ä¨·Äú·ÄÆ)</option>
                            <option>Katha(·ÄÄ·Äû·Ä¨)</option>
                            <option>Kawkareik(·ÄÄ·Ä±·Ä¨·Ä∑·ÄÄ·Äõ·Ä≠·Äê·Ä∫)</option>
                            <option>Kawyhaung(·ÄÄ·Ä±·Ä¨·Ä∑·Äû·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Khin U (·ÄÅ·ÄÑ·Ä∫·Ä¶·Ä∏)</option>
                            <option>Koebin(·ÄÄ·Ä≠·ÄØ·Ä∏·Äï·ÄÑ·Ä∫)</option>
                            <option>Kume(·ÄÄ·Ä∞·Äô·Ä≤)</option>
                            <option>Kutkai(·ÄÄ·ÄΩ·Äê·Ä∫·ÄÅ·Ä≠·ÄØ·ÄÑ·Ä∫)</option>
                            <option>Kyaikkami(·ÄÄ·Äª·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÅ·Äô·ÄÆ)</option>
                            <option>Kyainseikgyi(·ÄÄ·Äº·Ä¨·Ä°·ÄÑ·Ä∫·Ä∏·ÄÜ·Ä≠·Äï·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Kyangin(·ÄÄ·Äº·Ä∂·ÄÅ·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Kyaukme(·ÄÄ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Ä≤)</option>
                            <option>Kyaukpadaung(·ÄÄ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Kyaiktiyo(·ÄÄ·Äª·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·ÄÆ·Ä∏·Äõ·Ä≠·ÄØ·Ä∏)</option>
                            <option>Kyaukse(·ÄÄ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·ÄÜ·Ää·Ä∫)</option>
                            <option>Lashio(·Äú·Ä¨·Ä∏·Äõ·Äæ·Ä≠·Ä∏)</option>
                            <option>Laukkaing(·Äú·Ä±·Ä¨·ÄÄ·Ä∫·ÄÄ·Ä≠·ÄØ·ÄÑ·Ä∫)</option>
                            <option>Letpadan(·Äú·ÄÄ·Ä∫·Äï·Ä∂·Äê·Äî·Ä∫·Ä∏)</option>
                            <option>Letpanhla(·Äú·ÄÄ·Ä∫·Äï·Ä∂·Äú·Äæ)</option>
                            <option>Lewe(·Äú·Äö·Ä∫·Äù·Ä±·Ä∏)</option>
                            <option>Mabein(·Äô·Äò·Ä≠·Äô·Ä∫·Ä∏)</option>
                            <option>Madaya(·Äô·Äê·Äπ·Äê·Äõ·Ä¨)</option>
                            <option>Magway(·Äô·ÄÄ·ÄΩ·Ä±·Ä∏)</option>
                            <option>Mahlaing(·Äô·Äú·Äæ·Ä≠·ÄÑ·Ä∫)</option>
                            <option>Mandalay(·Äô·Äî·Äπ·Äê·Äú·Ä±·Ä∏)</option>
                            <option>Meiktila(·Äô·Ä≠·Äê·Äπ·Äë·ÄÆ·Äú·Ä¨)</option>
                            <option>Minbu(·Äô·ÄÑ·Ä∫·Ä∏·Äò·Ä∞·Ä∏)</option>
                            <option>Mogaung(·Äô·Ä≠·ÄØ·Ä∏·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Mogok(·Äô·Ä≠·ÄØ·Ä∏·ÄÄ·ÄØ·Äê·Ä∫)</option>
                            <option>Mohnyin(·Äô·Ä≠·ÄØ·Ä∏·Ää·Äæ·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Muse(·Äô·Ä∞·ÄÜ·Äö·Ä∫)</option>
                            <option>Mya Taung(·Äô·Äº·Äê·Ä±·Ä¨·ÄÑ·Ä∫)</option>
                            <option>Maung Mya(·Äô·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äô·Äº)</option>
                            <option>Myawaddy(·Äô·Äº·Äù·Äê·ÄÆ)</option>
                            <option>Myeik(·Äô·Äº·Ä≠·Äê·Ä∫)</option>
                            <option>Myingyan(·Äô·Äº·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·Ä∂)</option>
                            <option>Myinmu(·Äô·Äº·ÄÑ·Ä∫·Ä∏·Äô·Ä∞)</option>
                            <option>Myitkyina(·Äô·Äº·ÄÖ·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏·Äî·Ä¨·Ä∏)</option>
                            <option>Myitnge(·Äô·Äº·ÄÖ·Ä∫·ÄÑ·Äö·Ä≠)</option>
                            <option>Namhkan(·Äî·Äô·Ä∫·Ä∑·ÄÅ·Äô·Ä∫·Ä∏)</option>
                            <option>Namhkok(·Äî·Äô·Ä∫·Ä∑·ÄÅ·ÄØ·Äê·Ä∫)</option>
                            <option>Nanmati(·Äî·Äô·Äπ·Äô·Äê·ÄÆ·Ä∏)</option>
                            <option>Natmauk(·Äî·Äê·Ä∫·Äô·Ä±·Ä¨·ÄÄ·Ä∫)</option>
                            <option>Natogyi(·Äî·ÄΩ·Ä¨·Ä∏·Äë·Ä≠·ÄØ·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Nay Pyi Taw(·Äî·Ä±·Äï·Äº·Ää·Ä∫·Äê·Ä±·Ä¨·Ä∫)</option>
                            <option>Ngapali(·ÄÑ·Äï·Äú·ÄÆ)</option>
                            <option>Ngar O(·ÄÑ·Ä´·Ä∏·Ä°·Ä≠·ÄØ·Ä∏)</option>
                            <option>Ngwe Saung(·ÄÑ·ÄΩ·Ä±·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫)</option>
                            <option>Pyin Oo Lwin(·Äï·Äº·ÄÑ·Ä∫·Ä¶·Ä∏·Äú·ÄΩ·ÄÑ·Ä∫)</option>
                            <option>Pyawbwe(·Äï·Äª·Ä±·Ä¨·Ä∫·Äò·ÄΩ·Äö·Ä∫)</option>
                            <option>Phyu(·Äñ·Äº·Ä∞·Ä∏)</option>
                            <option>Popa(·Äï·ÄØ·Äï·Äπ·Äï·Ä´·Ä∏)</option>
                            <option>Pyay(·Äï·Äº·Ää·Ä∫)</option>
                            <option>Shwe ku(·Äõ·ÄΩ·Äæ·Ä±·ÄÄ·Ä∞)</option>
                            <option>Shwe Bo(·Äõ·ÄΩ·Äæ·Ä±·Äò·Ä≠·ÄØ)</option>
                            <option>Shwe Nyaung(·Äõ·ÄΩ·Äæ·Ä±·Ää·Ä±·Ä¨·ÄÑ·Ä∫)</option>
                            <option>Sintgaing(·ÄÖ·Äâ·Ä∫·Ä∑·ÄÄ·Ä≠·ÄØ·ÄÑ·Ä∫)</option>
                            <option>Taunggyi(·Äê·Ä±·Ä¨·ÄÑ·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏)</option>
                            <option>Tachileik(·Äê·Ä¨·ÄÅ·Äª·ÄÆ·Äú·Ä≠·Äê·Ä∫)</option>
                            <option>Ye(·Äõ·Ä±·Ä∏)</option>
                            <option>Ye U(·Äõ·Ä±·Ä¶·Ä∏)</option>
                            <option>Yamethin(·Äõ·Äô·Ää·Ä∫·Ä∏·Äû·ÄÑ·Ä∫·Ä∏)</option>
                            <option>Wundwin(·Äù·Äô·Ä∫·Ä∏·Äê·ÄΩ·ÄÑ·Ä∫·Ä∏)</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Departure</label>
                    <input id="departure_date" name="date" type="date" class="w-full p-4 border-2 border-gray-200 rounded-xl">
                </div>
                
                <div class="flex items-end">
                    <button id="searchroutebtn" type="button" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold hover:bg-blue-700">
                        <i class="fas fa-search mr-2"></i> Search Buses
                    </button>
                </div>
            </div>
        </div>
    </form>
</section>

<!-- Modal -->
<div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="bg-white p-8 rounded-3xl w-full max-w-md shadow-xl relative border border-blue-300">

    <h2 id="modalTitle" class="text-3xl font-semibold text-blue-700 mb-6 text-center flex items-center justify-center space-x-3">
      <i class="fas fa-wallet text-blue-500 text-2xl"></i>
      <span>Payment Required</span>
    </h2>

    <input id="seatbtnid" type="number" name="seatid" value="0" hidden>

    <div class="flex justify-end space-x-4 mt-8">
      <button id="closeModalBtn" 
              class="bg-gray-200 text-gray-800 px-5 py-2 rounded-xl hover:bg-gray-300 shadow-sm transition duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400">
        Close
      </button>
      <button id="paynowBtn" 
              class="bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-2 rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-900 transition duration-200 focus:outline-none focus:ring-4 focus:ring-blue-400 flex items-center space-x-2">
        <i class="fas fa-credit-card text-lg"></i>
        <span>Pay Now</span>
      </button>
      <button id="cancelbookingBtn" class="bg-gradient-to-r from-red-600 to-red-800 text-white px-6 py-2 rounded-xl shadow-lg hover:from-red-700 hover:to-red-900 transition duration-200 focus:outline-none focus:ring-4 focus:ring-red-400 flex items-center space-x-2">
        <i class="fas fa-times-circle text-lg"></i>
        <span>Cancel Booking</span>
      </button>
    </div>

  </div>
</div>




<!-- Ticket Table -->

  <table id="toPrint" class="hidden">
  <thead>
    <tr id="opname">
      <th colspan="6" style="text-align:center;">üöçElite<br>normal</th>
    </tr>
    <tr>
      <th>üìçFrom</th>
      <th>üìçTo</th>
      <th>üìÖDate</th>
      <th>‚è∞Time</th>
      <th>üíµPrice</th>
      <th>üí∫Seat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Yangon</td>
      <td>Mandalay</td>
      <td>13-07-2025</td>
      <td>6:00 AM</td>
      <td>21000 MMK</td>
      <td>B2</td>
    </tr>
    <tr>
      <th colspan="2">üë§Name</th>
      <td colspan="4">Aye Thet Mon Khin</td>
    </tr>
    <tr>
      <th colspan="2">üÜîNRC</th>
      <td colspan="4">12/ABC(N)123456</td>
    </tr>
    <tr>
      <th colspan="2">üìûPhone</th>
      <td colspan="4">09-123456789</td>
    </tr>
    <tr>
      <td colspan="6" style="text-align:center; padding-top: 20px; font-weight: bold; font-size: 1.2rem; color: #0a5274;">
        Thank you for buying ticket üôè
      </td>
    </tr>
  </tbody>
</table>


    <div id="bus-container">
        
        

  <!-- Bus Template (repeat for each bus, change IDs and data) -->

    <!-- Final CTA -->
    <section class="gradient-bg-dark text-white py-20 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full opacity-10">
            <div class="absolute top-1/4 left-1/4 w-40 h-40 rounded-full bg-white animate__animated animate__pulse animate__infinite"></div>
            <div class="absolute bottom-1/3 right-1/4 w-32 h-32 rounded-full bg-white animate__animated animate__pulse animate__infinite animate__delay-1s"></div>
        </div>
        
        <div class="container mx-auto px-4 text-center relative z-10">
            <h2 class="text-3xl md:text-4xl font-bold mb-6">Ready for Your Next Adventure?</h2>
            <p class="text-xl mb-8 max-w-2xl mx-auto opacity-90">
                Now you can get our service now.
            </p>
                </button>
        </div>
</div>
    </section>
   <script>
     $(document).ready(function(){

        operatorname();
        function operatorname(){

            
        $.ajax({
                url: "/opsearch/",
                method: "GET",
                // 'csrfmiddlewaretoken': '{{ csrf_token }}',
                success: function (response) {
                    // alert('hello')
                     console.log(response) //search·Ä°·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äõ·Äæ·Ä¨·Äï·ÄÆ·Ä∏·Äê·Ä¨·Äî·Ä≤·Ä∑·ÄÑ·Ä´·Äê·Ä≠·ÄØ·Ä∑·Äõ·Äæ·Ä¨·Äê·Ä≤·Ä∑bus·ÄÄ·Äª·Äú·Ä¨·Äô·Äö·Ä∫ ·ÄÑ·Ä´·Äê·Ä≠·ÄØ·Ä∑·Äõ·Äæ·Ä¨·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äê·Ä≤·Ä∑date·Äî·Ä≤·Ä∑·Äï·Äê·Ä∫·Äû·ÄÄ·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äê·Ä±·Ä¨·Ä∑·Äï·Ä±·Ä´·Ä∑ ·Ä°·Ä≤·Ä∑·Äê·Ä¨·ÄÄ·Ä≠·ÄØ·Äí·ÄÆ·Äô·Äæ·Ä¨·Äõ·Ä±·Ä∏·ÄÄ·Äº·Äô·Äö·Ä∫
                    
                     $('#bus-container').empty();
                    response.busroute.forEach(function(i) {

                        $('#bus-container').append(`
                         <div>
                           <div class="bg-white rounded-xl shadow-md overflow-hidden mb-6">
                            <div class="buslist md:flex">
                            <div class="md:w-1/4 bg-blue-50 p-6 flex flex-col items-center justify-center">
                                <div class="text-center mb-4">
                                <img src="https://cdn-icons-png.flaticon.com/512/741/741411.png" alt="Bus Icon" class="w-16 h-16 mx-auto">
                                <h4 class="font-bold text-lg mt-2">${i.bus_name}</h4>
                                <p class="text-sm text-gray-600">${ i.bus_type }</p>
                                </div>
                                <div class="text-center">
                                <input type="text" name="busid"  value = "${i.busid}" hidden>
                                <p class="text-2xl font-bold text-blue-600">Car Number</p>
                                <p class="text-sm text-gray-500">${i.bus_number}</p>
                                </div>
                            </div>

                            <div class="md:w-2/4 p-6 border-r border-gray-200">
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>

                                    <p class="text-sm text-black-500">üìçfrom_location</p>
                                    <p class="font-bold">${i.from_location}</p>
                            </div>

                                <div>

                                    <p class="text-sm text-black-500">$Price</p>
                                    <p class="font-bold">${i.price}</p>
                                </div>

                                <div>
                                    <p class="text-sm  text-black-500">üìçto_loaction</p>
                                    <p class="font-bold text-black-500">${i.to_location}</p>
                                </div>

                                
                                <div>
                                    <p class="text-sm text-black-500">Time</p>
                                    <p class="text-sm font-bold text-black-500">${formatTime24to12(i.time)}</p>
                                </div>

                                </div>

                                <div class="flex items-center space-x-2 mb-2">
                                <i class="fas fa-wifi text-blue-500"></i>
                                <span class="text-sm">Free WiFi</span>
                                </div>

                                <div class="flex items-center space-x-2 mb-2">
                                <i class="fas fa-snowflake text-blue-500"></i>
                                <span class="text-sm">AC</span>
                                </div>

                                <div class="flex items-center space-x-2">
                                <i class="fas fa-tv text-blue-500"></i>
                                <span class="text-sm">Entertainment</span>
                                </div>
                            </div>

                            <div class="md:w-1/4 p-6 flex flex-col justify-center seat">
                                 <input class= "seatviewid" type="number" name="seatid"  value = "${i.sid}" hidden>
                                <button data-busid="${i.busid}" data-seatid="${i.sid}" onclick="seatviewbtn(this)" class="viewseatbtn bg-blue-600 text-white py-3 px-6 rounded-lg font-bold mb-3 hover:bg-blue-700 transition">
                                View Seats
                                </button> 
                            </div>
                            </div>
                        </div>
                        </div>
                        </div>

                         <!-- Seat Selection Dropdown -->
                            <div id="seat-section-${i.sid}" class="seatgp hidden border-t border-gray-200 p-6 bg-gray-50">
                            <div class="grid md:grid-cols-2 gap-6">
                                <!-- Seat Layout -->
                                <div>
                                <h4 class="text-lg font-semibold mb-2">Select Seat</h4>
                                <input type="number" name="seatid"  value = "${i.sid}" hidden>
                                <div id ="seatId-${i.sid}" class="seatlist grid grid-cols-4 gap-4 max-w-xs">
                                </div>
                                </div>

                         <!-- Passenger Info -->
                            <form  class="bg-white p-4 rounded-lg border passengerFm" id="form-1">
                            <h4 class="text-lg font-semibold mb-2">Passenger Information</h4>


                            <input type="hidden" name="route" value = "0">

                            <div class="mb-2">
                                <label class="block text-sm font-medium">Name</label>
                                <input type="text" id="pinput-${i.sid}" name="pname" class="w-full border px-3 py-2 rounded" required>
                            </div>

                            <div class="mb-2">
                                <label class="block text-sm font-medium">NRC</label>
                                <input type="text" id="pinputnrc-${i.sid}" name="pnrc" class="w-full border px-3 py-2 rounded" required>
                            </div>

                            <div class="mb-2">
                                <label class="block text-sm font-medium">Phone</label>
                                <input type="text" id="pinputpno-${i.sid}" name="Pphone" class="w-full border px-3 py-2 rounded" required>
                            </div>

                            <!-- Gender Selection -->
                            <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-semibold mb-2">Gender</label>
                            <div  id="pinputgender-${i.sid}" class="flex items-center space-x-6">
                                <label class="flex items-center">
                                <input type="radio" name="gender-${i.sid}" value="male" class="text-pink-500 focus:ring-pink-400">
                                <span class="ml-2 text-gray-700">Male</span>
                                </label>
                                <label class="flex items-center">
                                <input type="radio" name="gender-${i.sid}" value="female" class="text-pink-500 focus:ring-pink-400">
                                <span class="ml-2 text-gray-700">Female</span>
                                </label>
                            </div>
                            </div>

                            <!-- Traveller Type Selection -->
                            <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-semibold mb-2">Traveller Type</label>
                            <div id="pinputtravellertype-${i.sid}" class="flex items-center space-x-6">
                                <label class="flex items-center">
                                <input type="radio" name="traveller_type-${i.sid}" value="local" class="text-pink-500 focus:ring-pink-400" required>
                                <span class="ml-2 text-gray-700">Local Traveller</span>
                                </label>
                                <label class="flex items-center">
                                <input type="radio" name="traveller_type-${i.sid}" value="foreign" class="text-pink-500 focus:ring-pink-400" required>
                                <span class="ml-2 text-gray-700">Foreign Traveller</span>
                                </label>
                            </div>
                            </div>


                            <!-- Special Request Field -->
                                <div class="mb-6">
                                <label for="" class="block text-gray-700 text-sm font-semibold mb-2">
                                    Special Request
                                </label>
                                <textarea id="pinputrequest-${i.sid}" name="prequest" rows="4" placeholder="Enter any notes or requests..."
                                    class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-700 shadow-sm resize-none">                                </textarea>
                                </div>

                            <button type="button" onclick="confirmBookingbtn(this, ${i.sid})" class="confirmbookbtn bg-blue-600 text-white px-4 py-2 mt-3 rounded hover:bg-blue-700">
                                Confirm Booking
                            </button>

                            <button type="button" onclick="paymentbtn(this, ${i.sid})" class="bg-blue-600 text-white px-4 py-2 mt-3 rounded hover:bg-blue-700">
                                Payment Complete
                            </button>

                            </form>
                            </div>
                        </div>
                        </div>
                        
                         `);
                          });
                    
                },
                error:function (response){
                    alert('error')
                }
            })

        }

     })

      $(document).ready(function(){
        $('#searchroutebtn').click(
            function(){
                 const fromname = $('#fromname').val();
                  const toname = $('#toname').val();
                   const departure_date = $('#departure_date').val();
                  $.ajax({
                url: "/opsearchdate/",
                method: "GET",
                // 'csrfmiddlewaretoken': '{{ csrf_token }}',
                data: { fromname: fromname, toname:toname, departure_date:departure_date}, //·Äí·ÄÆ·Ä°·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äú·Ä±·Ä∏·ÄÄ search ·Äõ·Äæ·Ä¨·Äê·Ä≤·Ä∑·Ä°·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äï·Ä´ ·Äô·Ä±·Ä∑·Äõ·ÄÑ·Ä∫·ÄÖ·Ä¨·Ä°·ÄØ·Äï·Ä∫·Äô·Äæ·Ä¨·Äô·Äæ·Äê·Ä∫·Äë·Ä¨·Ä∏·Äê·Äö·Ä∫·Äï·Äº·Äî·Ä∫·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äî·Ä±·Ä¨·Ä∫
                success: function (response) {
                    console.log(response) //search·Ä°·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äõ·Äæ·Ä¨·Äï·ÄÆ·Ä∏·Äê·Ä¨·Äî·Ä≤·Ä∑·ÄÑ·Ä´·Äê·Ä≠·ÄØ·Ä∑·Äõ·Äæ·Ä¨·Äê·Ä≤·Ä∑bus·ÄÄ·Äª·Äú·Ä¨·Äô·Äö·Ä∫ ·ÄÑ·Ä´·Äê·Ä≠·ÄØ·Ä∑·Äõ·Äæ·Ä¨·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äê·Ä≤·Ä∑date·Äî·Ä≤·Ä∑·Äï·Äê·Ä∫·Äû·ÄÄ·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äê·Ä±·Ä¨·Ä∑·Äï·Ä±·Ä´·Ä∑ ·Ä°·Ä≤·Ä∑·Äê·Ä¨·ÄÄ·Ä≠·ÄØ·Äí·ÄÆ·Äô·Äæ·Ä¨·Äõ·Ä±·Ä∏·ÄÄ·Äº·Äô·Äö·Ä∫
                    $('#bus-container').empty();
                    response.busroute.forEach(function(i) {

                        $('#bus-container').append(`
                          <div class="bg-white rounded-xl shadow-md overflow-hidden mb-6">
                            <div class="buslist md:flex">
                            <div class="md:w-1/4 bg-blue-50 p-6 flex flex-col items-center justify-center">
                                <div class="text-center mb-4">
                                <img src="https://cdn-icons-png.flaticon.com/512/741/741411.png" alt="Bus Icon" class="w-16 h-16 mx-auto">
                                <h4 class="font-bold text-lg mt-2">${i.bus_name}</h4>
                                <p class="text-sm text-gray-600">${ i.bus_type }</p>
                                </div>
                                <div class="text-center">
                                <input type="text" name="busid"  value = "${i.busid}" hidden>
                                <p class="text-2xl font-bold text-blue-600">Car Number</p>
                                <p class="text-sm text-gray-500">${i.bus_number}</p>
                                </div>
                            </div>

                            <div class="md:w-2/4 p-6 border-r border-gray-200">
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>

                                    <p class="text-sm text-black-500">üìçfrom_location</p>
                                    <p class="font-bold">${i.from_location}</p>
                                </div>

                                <div>

                                    <p class="text-sm text-black-500">$Price</p>
                                    <p class="font-bold">${i.price}</p>
                                </div>

                                <div>
                                    <p class="text-sm  text-black-500">üìçto_loaction</p>
                                    <p class="font-bold text-black-500">${i.to_location}</p>
                                </div>

                                
                                <div>
                                    <p class="text-sm text-black-500">Time</p>
                                    <p class="text-sm font-bold text-black-500">${formatTime24to12(i.time)}</p>
                                </div>

                                </div>

                                <div class="flex items-center space-x-2 mb-2">
                                <i class="fas fa-wifi text-blue-500"></i>
                                <span class="text-sm">Free WiFi</span>
                                </div>

                                <div class="flex items-center space-x-2 mb-2">
                                <i class="fas fa-snowflake text-blue-500"></i>
                                <span class="text-sm">AC</span>
                                </div>

                                <div class="flex items-center space-x-2">
                                <i class="fas fa-tv text-blue-500"></i>
                                <span class="text-sm">Entertainment</span>
                                </div>
                            </div>

                            <div class="md:w-1/4 p-6 flex flex-col justify-center seat">
                                 <input class= "seatviewid" type="number" name="seatid"  value = "${i.sid}" hidden>
                                <button data-busid="${i.busid}" data-seatid="${i.sid}" onclick="seatviewbtn(this)" class="viewseatbtn bg-blue-600 text-white py-3 px-6 rounded-lg font-bold mb-3 hover:bg-blue-700 transition">
                                View Seats
                                </button> 
                            </div>
                            </div>

                            <!-- Seat Selection Dropdown -->
                            

                            <div id="seat-section-${i.sid}" class="seatgp hidden border-t border-gray-200 p-6 bg-gray-50">
                            <div class="grid md:grid-cols-2 gap-6">
                                <!-- Seat Layout -->
                                <div>
                                <h4 class="text-lg font-semibold mb-2">Select Seat</h4>
                                <input type="number" name="seatid"  value = "${i.sid}" hidden>
                                <div id ="seatId-${i.sid}" class="seatlist grid grid-cols-4 gap-4 max-w-xs">
                            </div>
                            </div>

                            <!-- Passenger Info -->
                            <form  class="bg-white p-4 rounded-lg border passengerFm" id="form-1">
                            <h4 class="text-lg font-semibold mb-2">Passenger Information</h4>


                            <input type="hidden" name="route" value = "0">

                            <div class="mb-2">
                                <label class="block text-sm font-medium">Name</label>
                                <input type="text" id="pinput-${i.sid}" name="pname" class="w-full border px-3 py-2 rounded" required>
                            </div>

                            <div class="mb-2">
                                <label class="block text-sm font-medium">NRC</label>
                                <input type="text" id="pinputnrc-${i.sid}" name="pnrc" class="w-full border px-3 py-2 rounded" required>
                            </div>

                            <div class="mb-2">
                                <label class="block text-sm font-medium">Phone</label>
                                <input type="text" id="pinputpno-${i.sid}" name="Pphone" class="w-full border px-3 py-2 rounded" required>
                            </div>

                            <!-- Gender Selection -->
                            <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-semibold mb-2">Gender</label>
                            <div  id="pinputgender-${i.sid}" class="flex items-center space-x-6">
                                <label class="flex items-center">
                                <input type="radio" name="gender-${i.sid}" value="male" class="text-pink-500 focus:ring-pink-400">
                                <span class="ml-2 text-gray-700">Male</span>
                                </label>
                                <label class="flex items-center">
                                <input type="radio" name="gender-${i.sid}" value="female" class="text-pink-500 focus:ring-pink-400">
                                <span class="ml-2 text-gray-700">Female</span>
                                </label>
                            </div>
                            </div>

                            <!-- Traveller Type Selection -->
                            <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-semibold mb-2">Traveller Type</label>
                            <div id="pinputtravellertype-${i.sid}" class="flex items-center space-x-6">
                                <label class="flex items-center">
                                <input type="radio" name="traveller_type-${i.sid}" value="local" class="text-pink-500 focus:ring-pink-400" required>
                                <span class="ml-2 text-gray-700">Local Traveller</span>
                                </label>
                                <label class="flex items-center">
                                <input type="radio" name="traveller_type-${i.sid}" value="foreign" class="text-pink-500 focus:ring-pink-400" required>
                                <span class="ml-2 text-gray-700">Foreign Traveller</span>
                                </label>
                            </div>
                            </div>


                            <!-- Special Request Field -->
                                <div class="mb-6">
                                <label for="" class="block text-gray-700 text-sm font-semibold mb-2">
                                    Special Request
                                </label>
                                <textarea id="pinputrequest-${i.sid}" name="prequest" rows="4" placeholder="Enter any notes or requests..."
                                    class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-700 shadow-sm resize-none">                                </textarea>
                                </div>


                           <button id="confirmBtn" type="button" onclick="confirmBookingbtn(this, ${i.sid})" class="bg-blue-600 text-white px-4 py-2 mt-3 rounded hover:bg-blue-700">
                                Confirm Booking
                            </button>

                            </form>
                            </div>
                        </div>
                        </div>
                         `);
                          });
                    
                },
                error:function (response){
                    alert('error')
                }
            
            });
            }
        )
            

    }); //ready function end


    //select seat with blue color
    $(document).on('click', '.seat-btn', function () {
          if ($(this).hasClass('selected')) {
              return;               // ·Äú·Ä∞·Äõ·Äæ·Ä≠·Äï·Äº·ÄÆ·Ä∏ seat ·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·ÄΩ·ÄÑ·Ä∑·Ä∫·Äô·Äï·Ä±·Ä∏
          }
          $(this).toggleClass('select');  // user ·Äõ·ÄΩ·Ä±·Ä∏·Äê·Ä≤·Ä∑ seat ·ÄÄ·Ä≠·ÄØ toggle ·Äú·ÄØ·Äï·Ä∫
      });

      $(document).on('click', '.booked', function () {
    $('#paymentModal').removeClass('hidden'); // Show modal
    var btnId = $(this).data('sid');
    console.log(btnId)
    $('#seatbtnid').val(btnId);

});

$(document).on('click', '#closeModalBtn', function () {
    $('#paymentModal').addClass('hidden'); // Hide modal
});


$(document).on('click', '#paynowBtn', function () {
   var seatId = $('#seatbtnid').val();  // Get seat id from hidden input   
//paynow confirm and print function
$.ajax({
    url: '/paynow/' + seatId,  // Matches Django view URL
    method: 'GET',
    success: function(response) {
        if (response.success) {
            // alert(response.message);
            // var op =response.ticket.Operator
            // console.log(op)
            
            $('#toPrint').empty();
            response.ticket.forEach(function(i) { 
             $('#toPrint').append(`
              <thead>
                <tr>
                <th colspan="6" style="text-align:center;">üöç${i.Operator}<br>${i.Bus_type}</th>
                </tr>
                <tr>
                <th>üìçFrom</th>
                <th>üìçTo</th>
                <th>üìÖDate</th>
                <th>‚è∞Time</th>
                <th>üíµPrice</th>
                <th>üí∫Seat</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td>${i.from_location}</td>
                <td>${i.to_location}</td>
                <td>${i.Date}</td>
                <td>${i.Time}</td>
                <td>${i.Price}K</td>
                <td>${i.Seat}</td>
                </tr>
                <tr>
                <th colspan="2">üë§Name</th>
                <td colspan="4">${i.Name}</td>
                </tr>
                <tr>
                <th colspan="2">üÜîNRC</th>
                <td colspan="4">${i.Nrc}</td>
                </tr>
                <tr>
                <th colspan="2">üìûPhone</th>
                <td colspan="4">${i.Phone}</td>
                </tr>
                <tr>
                <td colspan="6" style="text-align:center; padding-top: 20px; font-weight: bold; font-size: 1.2rem; color: #0a5274;">
                    Thank you for buying ticket üôè
                </td>
                </tr>
            </tbody>
             `);
        })
            $('#paymentModal').addClass('hidden');

            // location.reload();
            // Optionally reload or update the seat status visually
           printTable();
           location.reload();
            
        } else {
            alert("Payment failed: " + response.message);
        }
    },
    
});

});

//cancel booking btn
$('#cancelbookingBtn').click(function () {
    var seatId = $('#seatbtnid').val();

    $.ajax({
        url: '/cancel/' + seatId + '/',  //  cancel booking URL
        method: 'GET',                        
        success: function(response) {
            if (response.success) {
                alert('Booking cancelled successfully.');
                location.reload();
            }
        }
    });
});


//print invoice
        function printTable() {
	        var el=document.getElementById("toPrint");
	        el.setAttribute('border', '1');
	        el.setAttribute('cellpadding', '5');
            el.setAttribute('cellspacing', '2');
            el.setAttribute('width', '100%');
    
	        newPrint=window.open("");
	        newPrint.document.write(el.outerHTML);
	        newPrint.print();
	        newPrint.close();
        }


  function formatTime24to12(time24) {
      if (!time24) return "";
      const [hourStr, minuteStr] = time24.split(':');
      let hour = parseInt(hourStr);
      const minute = minuteStr;
      const ampm = hour >= 12 ? 'PM' : 'AM';
      hour = hour % 12 || 12;
      return `${hour}:${minute} ${ampm}`;
  }

  function seatviewbtn(element){
    const bus_id =$(element).data('busid');                      
    const currentdiv = $(element).closest('.seat');              
    const sid = currentdiv.find("input[name='seatid']").val();   
    // toggleseatbtn();
    toggleSeatSection('seat-section-'+sid);             
    seatview(bus_id,sid);                              
    // clearselectedSeatList();
    localStorage.removeItem('selectedSeatList');      
  }

  function toggleSeatSection(sid) {

    const section = document.getElementById(sid);
    section.classList.toggle('hidden');
  }

  function seatview(bus_id,sid){
     $.ajax({
        url: '/get_seats/',                
        method: 'GET',
        data: { bus_id: bus_id, sid:sid },           
        success: function(response) {       
            
            console.log(response.bus_type);
            if  (response.bus_type == 'vip'){
            //    $(selector).addClass(className);
            // $(selector).removeClass(class_name, function(index, current_class_name))
            $('#seatId-'+sid).removeClass("grid-cols-4");  //seat for normal 
            $('#seatId-'+sid).addClass("grid-cols-3"); //seat for vip
            }
            $('#seatId-'+sid).empty();      
             response.seats.forEach(function(i) { 
                if (i.seat_status ==1) {     //select seat green book or selected

                      $('#seatId-'+sid).append(`
                        <button class="seat-btn "  data-routeId="${sid}" data-busnameid="${bus_id}" data-sid="${i.id}">${i.seat_number}</button>`)

                } 
                    else if(i.seat_status ==2) {     //select seat green book or selected

                      $('#seatId-'+sid).append(`
                        <button class="seat-btn booked"  data-routeId="${sid}" data-busnameid="${bus_id}" data-sid="${i.id}">${i.seat_number}</button>`)

                } 
                else{
                    $('#seatId-'+sid).append(`
                        <button class="seat-btn selected"  data-routeId="${sid}" data-busnameid="${bus_id}" data-sid="${i.id}">${i.seat_number}</button>`)

                }       
             
             })
        },
    });
}


function confirmBookingbtn(btn, sid) {      //add btn
    let abc = "#seat-section-" + sid;
    let selectroute = abc + " .seat-btn.select";  //fix  "#seat-section-"+sid+" "+".seat-btn.selected";
    let pinput = "#pinput-" + sid;
    let pinputnrc = "#pinputnrc-" + sid;
    let pinputpno = "#pinputpno-" + sid;
    // Get selected gende
    let genderSelector = `input[name="gender-${sid}"]:checked`;
    let genderVal = $(genderSelector).val();
    // Get selected traveller type
    let travellerSelector = `input[name="traveller_type-${sid}"]:checked`;
    let travellerVal = $(travellerSelector).val();
    let pinputrequest = "#pinputrequest-" + sid;

    // console.log(abc);
    const currenttr = $(btn).closest(abc); // btn is the button element now in this fix this to btn

    var pname = $(pinput).val();
    var pnrc = $(pinputnrc).val();
    var Pphone = $(pinputpno).val();
    var prequest = $(pinputrequest).val();

    const selectedSeats = $(selectroute);     
    const seatList = JSON.parse(localStorage.getItem('selectedSeatList')) || [];    
    localStorage.setItem('selectedSeatList', JSON.stringify(seatList));       
    
    selectedSeats.each(function() {           
        seatsid = $(this).data('sid')        
        seatList.push({                      
            seat_number : seatsid,
            pname:pname,
            pnrc:pnrc, 
            Pphone:Pphone,
            pgender: genderVal,
            ptravellertype:travellerVal,
            prequest:prequest,
            routeid:sid
        });
        
    });

    console.log( JSON.stringify(seatList))

    // Send booking data to Django backend
    $.ajax({  
        url: '/confirm/' + sid,
        method: 'POST',
        data: JSON.stringify(seatList),  // fix seatList to this JSON.stringify(seatList)
        contentType: 'application/json',
        dataType: 'json',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}'
        },
        success: function(response) {
            
            alert('Booking successful!');
            location.reload();

        },
        error: function(response){
            alert('Booking failed!');
        }
    });
}

function paymentbtn(btn, sid) {
    let abc = "#seat-section-" + sid;
    let selectroute = abc + " .seat-btn.select";
    let pinput = "#pinput-" + sid;
    let pinputnrc = "#pinputnrc-" + sid;
    let pinputpno = "#pinputpno-" + sid;
    // Get selected gende
    let genderSelector = `input[name="gender-${sid}"]:checked`;
    let genderVal = $(genderSelector).val();
    // Get selected traveller type
    let travellerSelector = `input[name="traveller_type-${sid}"]:checked`;
    let travellerVal = $(travellerSelector).val();
    let pinputrequest = "#pinputrequest-" + sid;

    const pname = $(pinput).val();
    const pnrc = $(pinputnrc).val();
    const Pphone = $(pinputpno).val();
    const prequest =  $(pinputrequest).val();


    const selectedSeats = $(selectroute);
    const seatList = [];

    selectedSeats.each(function () {
        let seatsid = $(this).data('sid');
        seatList.push({
            seat_number: seatsid,
            pname: pname,
            pnrc: pnrc,
            Pphone: Pphone,
            pgender: genderVal,
            ptravellertype:travellerVal,
            prequest:prequest,
            routeid: sid
        });
    });

    console.log("Payment Data:", JSON.stringify(seatList));

    $.ajax({
        url: '/payment/' + sid,
        method: 'POST',
        data: JSON.stringify(seatList),
        contentType: 'application/json',
        dataType: 'json',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}'
        },
        success: function (response) {
            if (response.success) {
                $('#toPrint').empty();

                response.ticket.forEach(function (i) {
                    $('#toPrint').append(`
                        <thead>
                            <tr>
                                <th colspan="6" style="text-align:center;">üöç${i.Operator}<br>${i.Bus_type}</th>
                            </tr>
                            <tr>
                                <th>üìçFrom</th>
                                <th>üìçTo</th>
                                <th>üìÖDate</th>
                                <th>‚è∞Time</th>
                                <th>üíµPrice</th>
                                <th>üí∫Seat</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>${i.from_location}</td>
                                <td>${i.to_location}</td>
                                <td>${i.Date}</td>
                                <td>${i.Time}</td>
                                <td>${i.Price}K</td>
                                <td>${i.Seat}</td>
                            </tr>
                            <tr>
                                <th colspan="2">üë§Name</th>
                                <td colspan="4">${i.Name}</td>
                            </tr>
                            <tr>
                                <th colspan="2">üÜîNRC</th>
                                <td colspan="4">${i.Nrc}</td>
                            </tr>
                            <tr>
                                <th colspan="2">üìûPhone</th>
                                <td colspan="4">${i.Phone}</td>
                            </tr>
                            <tr>
                                <td colspan="6" style="text-align:center; padding-top: 20px; font-weight: bold; font-size: 1.2rem; color: #0a5274;">
                                    Thank you for buying ticket üôè
                                </td>
                            </tr>
                        </tbody>
                    `);
                });

                $('#paymentModal').addClass('hidden');
                printTable();
                location.reload();
            } else {
                alert("Payment failed: " + response.message);
            }
        }
    });
}


   </script>

</body>
</html>